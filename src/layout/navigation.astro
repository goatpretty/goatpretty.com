---
import Rss from '../components/icons/rss.astro';
import '../styles/global.css';
---

<header
  class='bg-bgLight dark:bg-bgDark
  h-16 w-full pl-6 pr-6 pt-4 pb-4 mb-1 flex justify-between items-center
  z-50'
>
  <div class='flex'>
    <a href='/' class='md:text-5xl text-2xl font-bold'>
      <span class='text-phBlack dark:text-phWhite'> GoatPretty's </span>
      <span
        class='bg-phOrange rounded-md pt-1 pl-1 pr-1 text-phWhite dark:text-phBlack'
      >
        Blog
      </span>
    </a>
    <a href='/rss.xml'>
      <Rss
        class='text-fontLight dark:text-fontDark md:h-6 md:w-6 h-6 w-6 ml-2'
      />
    </a>
  </div>

  <nav class='text-fontLight dark:text-fontDark text-xl flex items-center'>
    <ul class='flex'>
      <li class='inline-flex flex-initial p-2 md:mr-2 mr-1'>
        <a href='/'>Blogs</a>
      </li>
      <li class='inline-flex flex-initial p-2'>
        <a href='/about'>About</a>
      </li>
    </ul>

    <!-- 🌞 / 🌙 模式切换按钮 -->
    <button
      id="theme-toggle"
      class="p-2 ml-3 rounded-md transition-all
             bg-foilLight dark:bg-bgDark
             text-fontLight dark:text-fontDark
             hover:scale-110"
      aria-label="切换主题"
      onclick="toggleTheme()"
    >
      🌞
    </button>
  </nav>
</header>

<script is:inline>
  // 读取主题状态
  const root = document.documentElement;
  const storedTheme = localStorage.getItem('theme');

  if (storedTheme === 'dark') {
    root.classList.add('dark');
  }

  function toggleTheme() {
    root.classList.toggle('dark');
    const isDark = root.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    document.getElementById('theme-toggle').textContent = isDark ? '🌙' : '🌞';
  }

  // 初始化图标
  window.addEventListener('DOMContentLoaded', () => {
    const isDark = root.classList.contains('dark');
    document.getElementById('theme-toggle').textContent = isDark ? '🌙' : '🌞';
  });
</script>
